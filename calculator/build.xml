<project name="calculator" basedir="." default="deploy">
    <target name="init">
        <property name="installbase" location="."/>
        <property name="src" location="${installbase}/src"/>
        <property name="classes" location="${installbase}/build/classes"/>
        <property name="war" location="${installbase}/build/war"/>
        <property name="ect" location="${installbase}/ect"/>
        <property name="webinf" location="${installbase}/web/WEB-INF"/>

        <!-- Root of classpath in which the web service class can be found. -->
        <property name="class-dir" value="${installbase}/build/classes/"/>
        <!-- Default output directory for artifacts generated by wsgen. -->
        <property name="wsgen-outdir" value="${class-dir}/"/>
        <!-- Directory to which WSDL document will be written by wsgen. -->
        <property name="wsdl-outdir" value="${webinf}/wsdl/"/>
        <!-- Directory to which generated sourcefiles will be written by wsgen. -->
        <property name="src-outdir" value="${installbase}/src/"/>
        <!-- Directory to which generated classfiles will be written by wsgen. -->
        <property name="gen-classdir" value="${class-dir}"/>
        <!-- Absolute path of the wsgen command. -->
        <property name="wsgen-cmd"
                  value="/home/san/Desktop/Setup/jdk1.6.0_43/bin/wsgen"/>
    </target>

    <target name="clean" depends="init">
        <delete dir="${classes}"></delete>
        <delete dir="${war}"></delete>
    </target>

    <target name="compile" depends="clean, init">
        <!-- CREATE CLASSES DIR -->
        <mkdir dir="${classes}"/>
        <mkdir dir="${war}"/>
        <mkdir dir="${war}/WEB-INF"/>

        <javac srcdir="${src}"
               destdir="${classes}">
            <include name="**/*.java"/>
        </javac>

        <exec executable="${wsgen-cmd}">
            <arg value="-verbose"/>
            <!-- Set the classpath. -->
            <arg value="-classpath"/>
            <arg value="${class-dir}"/>
            <!-- Generate a WSDL file. -->
            <arg value="-wsdl"/>
            <!-- Specify where to write other generated files. -->
            <arg value="-d"/>
            <arg value="${wsgen-outdir}"/>
            <!-- Specify where to write WSDL and XML schema files. -->
            <arg value="-r"/>
            <arg value="${wsdl-outdir}"/>
            <!-- Specify where to write generated source files. -->
            <arg value="-s"/>
            <arg value="${src-outdir}"/>
            <!-- Keep generated source files. -->
            <arg value="-keep"/>
            <!-- Specify service endpoint interface/class. -->
            <arg value="com.san.Calculator" />
        </exec>

        <replace file="${wsdl-outdir}/CalculatorService.wsdl" token="REPLACE_WITH_ACTUAL_URL" value="http://localhost:8080/calculator"/>
    </target>

    <target name="deploy" depends="compile">
        <copy todir="${webinf}/classes" verbose="true">
            <fileset dir="${classes}" />
        </copy>
        <copy todir="${war}/WEB-INF" verbose="true">
            <fileset dir="${webinf}" />
        </copy>

        <jar basedir="${war}" destfile="calculator.war" />

    </target>



</project>